---
title: "Intro To R"
author: "Maths Skills Centre"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This document contains all the materials covered in the Introduction to R workshop of the Maths Skills Centre.

# Overview of RStudio

> Questions:  
> 1. What are the four panels in RStudio?  
> 2. How is a project set up in RStudio?  
> 3. Where do we save files for RStudio to use?  
> 
> 
> Objectives:  
> 1. Navigate the RStudio environment.   
> 2. Set up an RStudio project for the workshop.  
> 3. Save the workshop files from the vle into the project working directory.

## Navigating the RStudio environment
RStudio has four panels. When RStudio is opened for the first time, only three are visible:

```{r, echo=FALSE, fig.cap="When RStudio is first started, three panels are visible."}
knitr::include_graphics("../img/three-panel-RStudio.png")
```

The fourth panel appears after we open a new *script*. Do so by pressing on the icons highlighted below:

```{r, echo=FALSE, fig.cap='Open a script by pressing the "New File" button, followed by "R Script".'}
knitr::include_graphics("../img/open-script.png")
```

Now you should see four panels, as shown below:
```{r, echo=FALSE, fig.cap="After opening a new script, RStudio has four panels."}
knitr::include_graphics("../img/four-panel-RStudio.png")
```

What is the purpose of these panels?

* *Top left*: this area is for the ***script**. A script is
a text file in which we write R code. The script can be saved, 
such that we can return to coding and use our code at a later
date. Saving a script also allows us to share our analysis
with colleagues.  
* *Bottom left*: this is the **console** area. Here we can also
write code, however this is not saved when we close R. It is
therefore better practice to code from the script. Additionally,
RStudio returns output to us in the console. For example, a 
response to the command `4 + 4` will appear in the console.    
* *Top right*: this is the *environment* area. Here the names of
everything we import into or create in RStudio will appear. For 
example, when we import a spreadsheet into RStudio, it appears
in the environment.  
* *Bottom right*: this is a multifunctional area, including our
file directories and plots. 

## Setting up a project in RStudio
When working with RStudio, for example for an analysis or even
this workshop, it is good practice to have all relevant files in
one folder. This makes it easier to locate files and to share
our work with colleagues. This folder is called our
**working directory**. 

A convenient way to set and save a working directory is through
the RStudio *projects* functionality. Here we will set up an 
RStudio project for this workshop:

* Under the `File` menu in the top left of RStudio, press 
`New Project`, then `New Directory`, then `New Project`.
* Provide a `Directory name` - this will be the name of the 
newly created folder. For example, you could name it 
`msc-intro-R`. 
* Under `Create project as subdirectory of`, select a convenient 
location for this new folder. For example, this could be your
desktop or your `Documents` folder. 

RStudio should now have refreshed, showing us our project 
environment. Open a new script, as we did in the previous 
section, such that the four-panel view is restored. Then press on
the `Save` icon to the right of the `New File` button. Give the
file a convenient name, such as `msc-intro-R`. It will then 
appear in the bottom right of RStudio as `msc-intro-R.R`. 

## Saving data files in our working directory
As mentioned above, one of the features of the RStudio project
is that it allows us to have all relevant files in one folder.
We will download the data files for this workshop and save them
inside our project directory. 

*Complete once it's clear where and how the files are stored*.















# Writing code in a script

> Questions:  
> 1. What are the common terms used to describe R code?  
> 2. What is the structure of commands in R?  
> 3. How can data be entered into RStudio manually?  
> 4. How are notes written alongside code?  
> 5. How and why do we install packages?
> 
> 
> Objectives:  
> 1. Define the following R terminology: `object`, 
> `assign`, `call`, `function`, `arguments` and `options`.   
> 2. Use a built-in `function` and control its working 
> with an `argument` and an `option`.  
> 3. Assign values to a named `vector` 
> using the `c()` function.  
> 4. Write `comments` to make a script easier to interpret.  
> 5. Install and load the `readr` package.  

## Common R terminology

### `Assign` a value to an `object`
In R, everything that we create or import is saved as an `object`. 
An `object` has a name, with which we can refer to it. 
When we save something as an `object`, this is referred to as `assigning` something
to that object. 
`Assigning` is done using the `<-` syntax, as exemplified below. If we wanted to
save the number 6 under the name `Six`, we would run:

```{r assign value to object example}
Four <- 4
```

After running this code, we see `Four` has appeared in the environment window. 
This confirms that we have successfully `assigned` a value to an `object`. 

### `Calling` a built-in `function` with one `argument`
Most commands in R involve `functions`. 
A `function` is an in-built piece of code that performs a specific task.
This saves us from having to write the code required for the task ourselves.
When a `function` is used in R, this is referred to as `calling` the `function`.
Usually, a `function` is `called` with one or more inputs - 
these are called `arguments`.

Let us take the `round`()` function as an example. 
This function rounds a supplied value. 
For example, we `call` the `round()` `function` on the value 3.14. 
The value 3.14 is an `argument` in our `call`:

```{r, eval = FALSE}
round(3.14)
```

R then returns in the console:

```{r, echo = FALSE}
round(3.14)
```

An argument can also be an object, as you will see in the challenge at the end of this section.

### Including an `argument` with an `option` in a `function` call
Often the behaviour of a `function` can be manipulated using 
`arguments` which take `options`. 
These `options` have defaults, 
which are assumed if we do not specify an alternative.

For example, the `round()` function takes the `digits` argument, for which
the default is `digits = 0`. That is why so far, `round()` has returned
values with 0 digits behind the decimal.

We can specify an alternative `option` for the `digits` `argument`, for example
for a single digit behind the decimal:

```{r}
round(3.14, digits = 1)
```

<details>
<summary>**Challenge**: assign the value 6.667 to an object named `number`. Then, call the `round()` function on the object `number`. Ensure that `round()` returns two digits behind the decimal. Find the solution in the drop-down.</summary>
<br>
```{r}
number <- 6.667
round(number, digits = 2)
```
</details>

### `Vectors` using the `c()` `function`
So far, we have worked with `objects` that contained a single value.
Often we are working with multiple data points. 
In R, multiple data points can be saved inside one `object` as a `vector`. 
A `vector` is a collection of data points of the *same type* 
(e.g. numbers of words). 
`Vectors` are formed by calling the `c()` function, with data provided between
the brackets, separated by commas. For example:

```{r}
numbers <- c(1,2,3,4,5,6)
```

`Vectors` can also contain words, which we call `strings` in R. Ensure that 
`strings` are always wrapped in quotes:

```{r}
colours <- c("red", "blue", "green")
```

Later in this workshop we will learn how to import data without 
needing to manually type data into `c()`.

### Writing `comments` to enhance script readability
As we progress through this workshop, our script will fill up with many
lines of code. To enhance readability for ourselves and for colleagues 
who may use our script at a later date, we include comments.

Any text in R that is preceded by a `#` is ignored by R and treated as a comment.
For example, if we were to comment when creating our vector `numbers`:

```{r}
# create a vector of the numbers 1 to 6
numbers <- c(1,2,3,4,5,6)
```

<details>
<summary>**Challenge**: assign the city names London, Manchester and Newcastle to an object named `cities`. Include a comment to increase the interpretability of your code. Find the solution in the drop-down.</summary>
<br>
```{r}
# a vector of city names
cities <- c("London", "Manchester", "Newcastle")
```
</details>

### Installing and loading packages
So far, we have used the built-in functions `round()` and `c()`. 
R has many useful functions, some of which do not come built-in.
Rather than releasing individual functions, collections of functions are
released together in packages.
Therefore, to use an external function, we need to install and load the
appropriate package. 

Working with packages is analogous to using a new light bulb:
1. First, we install the package in R using the `install.packages()` function.
This is analogous to screwing a new light bulb into the socket - we only
need to do this **once**.  
2. Then, every time we open RStudio and want to use the package, we need to load it 
using the `library()` function. This is analogous to using a light bulb - every 
time we enter the room, we need to turn on the light again.

Let us take the `readr` package as an example. In the next section, we will use
a function from this package. First, we install the package. You can run the 
following line from the console rather than the script, as we do not want the
package to install again every time we run the script: 

```{r install readr, eval = FALSE}
# install the readr package
install.packages("readr")
```

Then we load the package. It is good practice to load all packages at the top
of our script. This way, it is easy for another user to identify whether they
need to install any packages before running our script. Therefore, paste the
following code at or near the top of your script:

```{r load readr}
# loading a package
library("readr")
```

You may receive a warning similar to the one above. This warning is usually not 
something to worry about. 

As we progress through the workshop, we will encounter other packages.
You will get a chance to further practice installing and loading then. 


























# Importing and viewing data

> Questions:  
> 1. How is data from a .csv file imported into R?  
> 2. What is a `data frame`?  
> 3. How is a summary view of a `tibble` viewed in R?  
> 4. What is a factor variable in R? [*if there is time*]  
> 5. How are string variables converted to factor variables? [*if there is time*]  
> 
> Objectives:  
> 1. Use `read_csv()` to import data from a .csv file as a `tibble`.  
> 2. Be aware of differences between a `tibble` and a `data.frame`.  
> 3. Use `head()`, `str()` and `summary()` to inspect a `tibble`.  
> 4. Describe the difference between a string variable and a factor variable. 
> [*if there is time*]  
> 5. Use `factor()` to convert a string variable to a character variable. 
> [*if there is time*]  

## Importing `.csv` data into RStudio
In the previous section we learned how to type data into RStudio using 
the `c()` function. More commonly, we directly import data from 
a `.csv` spreadsheet. We will use the `read_csv()` function from 
the `readr` package, which we loaded in the previous section.

We will use a subset from the NHANES data, which is a public health 
survey in the US. This data should be located inside the `data` folder
of your working directory. We import the data as follows:

```{r import NHANES data for learners, eval = FALSE}
healthData <- read_csv("data/NHANES.csv")
```

```{r import NHANES data for developer, include = FALSE}
healthData <- read_csv("../data/NHANES.csv")
```

We can see that `healthData` has appeared in the environment panel. 
This `object` is a `tibble`, which you can think of as the RStudio 
equivalent of a spreadsheet. 
The main difference is that in `tibbles`, each column is a `vector`. 
Recall that within a `vector`, data must be of the same type.
Therefore, individual columns in a `tibble` are always of one data type. 

## A note on `tibble` vs `data frame`
In the previous section we created the `tibble` `healthData`. 
As you come to using RStudio independently, you are likely to come 
across the `data frame`. 
The `tibble` and the `data frame` are very similar - in fact, `tibble` is a 
type of `data frame`.
In this workshop we limit ourselves to `tibble`, as its an updated version of
the `data frame`. 
However, in many online tutorials, `data frame` is used as the tutorials 
are a few years old.
To find out more about the difference between `tibble` and `data frame`,
see [this blog](https://www.jumpingrivers.com/blog/the-trouble-with-tibbles/).





